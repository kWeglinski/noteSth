angular.module("noteSth",["ngRoute","LocalStorageModule"]).config(["$routeProvider","$locationProvider",function($routeProvider,$locationProvider){$routeProvider.when("/login",{templateUrl:"/views/login.html",controller:"login"}).when("/register",{templateUrl:"/views/register.html",controller:"register"}).when("/dash",{templateUrl:"/views/dash.html",controller:"dashboard"}).when("/",{templateUrl:"/views/index.html",controller:"home"}).otherwise({redirectTo:"/"}),$locationProvider.html5Mode({enabled:!0,requireBase:!1})}]);var app=angular.module("noteSth");app.controller("base",["$scope","dataS","localStorageService","$location",function($scope,dataS,localStorageService,$location){var token=localStorageService.get("token");token.length>2&&dataS.getData("/user",token).success(function(data){$scope.usr=data})}]),angular.module("noteSth").service("config",function(){return{API:"http://localhost:4000/api"}}),angular.module("noteSth").service("dataS",["$http","config",function($http,config){var headers=function(token){return token?{"Content-type":"application/json","x-access-token":token}:{"Content-type":"application/json"}};return{getData:function(url,token){return $http({method:"GET",url:config.API+url,headers:headers(token)})},postData:function(url,data,token){return $http({method:"POST",url:config.API+url,data:data,headers:headers(token)})},editData:function(url,data,token){return $http({method:"PUT",url:config.API+url,data:data,headers:headers(token)})},delData:function(url,hash,token){return $http({method:"DELETE",data:{hash:hash},url:config.API+url,headers:headers(token)})}}}]);var app=angular.module("noteSth");app.controller("dashboard",["$scope","dataS","localStorageService","$location",function($scope,dataS,localStorageService,$location){}]);var app=angular.module("noteSth");app.controller("home",["$scope","dataS","localStorageService","$location",function($scope,dataS,localStorageService,$location){localStorageService.get("token").length>2&&$location.path("/dash")}]);var app=angular.module("noteSth");app.controller("login",["$scope","dataS","localStorageService","$location",function($scope,dataS,localStorageService,$location){$scope.logindo=function(){dataS.postData("/auth",$scope.login).success(function(data){localStorageService.set("token",data.token),data.token&&$location.path("/dash")})}}]);var app=angular.module("noteSth");app.controller("register",["$scope","dataS",function($scope,dataS){$scope.registerdo=function(){dataS.postData("http://localhost:4000/api/user",$scope.login).success(function(data){console.log(data)})}}]);