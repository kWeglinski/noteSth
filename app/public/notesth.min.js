angular.module("noteSth",["ngRoute","LocalStorageModule"]).config(["$routeProvider","$locationProvider",function($routeProvider,$locationProvider){$routeProvider.when("/login",{templateUrl:"/views/login.html",controller:"login"}).when("/register",{templateUrl:"/views/register.html",controller:"register"}).when("/dash",{templateUrl:"/views/dash.html",controller:"dashboard"}).when("/",{templateUrl:"/views/index.html",controller:"home"}).otherwise({redirectTo:"/"}),$locationProvider.html5Mode({enabled:!0,requireBase:!1})}]);var app=angular.module("noteSth");app.controller("base",["$scope","dataS","localStorageService","$location",function($scope,dataS,localStorageService,$location){var token=localStorageService.get("token");token&&token.length>2&&dataS.getData("/user",token).success(function(data){$scope.usr=data}),$scope.callmodal=function(type){$scope.modal=type}}]),angular.module("noteSth").service("config",function(){return{API:"http://localhost:4000/api"}}),angular.module("noteSth").service("dataS",["$http","config","localStorageService",function($http,config,localStorageService){var headers=function(token){return token?{"Content-type":"application/json","x-access-token":localStorageService.get("token")}:{"Content-type":"application/json"}};return{getData:function(url,token){return $http({method:"GET",url:config.API+url,headers:headers(token)})},postData:function(url,data,token){return $http({method:"POST",url:config.API+url,data:data,headers:headers(token)})},editData:function(url,data,token){return $http({method:"PUT",url:config.API+url,data:data,headers:headers(token)})},delData:function(url,hash,token){return $http({method:"DELETE",data:{hash:hash},url:config.API+url,headers:headers(token)})}}}]);var app=angular.module("noteSth");app.controller("dashboard",["$scope","dataS","localStorageService","$location",function($scope,dataS,localStorageService,$location){dataS.getData("/note",!0).success(function(data){$scope.notes=data})}]);var app=angular.module("noteSth");app.controller("home",["$scope","dataS","localStorageService","$location",function($scope,dataS,localStorageService,$location){localStorageService.get("token").length>2&&$location.path("/dash")}]),angular.module("noteSth").directive("modal",function(){return{restrict:"E",link:function(scope,element,attrs){scope.getContentUrl=function(){return attrs.type?"/views/modals/"+attrs.type+".html":void 0}},template:'<div class="note-modal" ng-include="getContentUrl()"></div>'}});var app=angular.module("noteSth");app.controller("note",["$scope","dataS","localStorageService","$location",function($scope,dataS,localStorageService,$location){$scope.note={body:{},send:function(){dataS.postData("/note",$scope.note.body,!0).success(function(data){})}}}]);var app=angular.module("noteSth");app.controller("login",["$scope","dataS","localStorageService","$location",function($scope,dataS,localStorageService,$location){$scope.logindo=function(){dataS.postData("/auth",$scope.login).success(function(data){localStorageService.set("token",data.token),data.token&&$location.path("/dash")})}}]);var app=angular.module("noteSth");app.controller("register",["$scope","dataS",function($scope,dataS){$scope.registerdo=function(){dataS.postData("http://localhost:4000/api/user",$scope.login).success(function(data){console.log(data)})}}]);